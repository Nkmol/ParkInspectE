<controls:MetroWindow x:Class="ParkInspect.View.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:ignore="http://www.galasoft.ch/ignore"            
        xmlns:controls="http://metro.mahapps.com/winfx/xaml/controls"
        xmlns:dialog="clr-namespace:MahApps.Metro.Controls.Dialogs;assembly=MahApps.Metro"
        xmlns:popup="clr-namespace:ParkInspect.View.UserControls.Popup"
        xmlns:dragablz="http://dragablz.net/winfx/xaml/dragablz"
        xmlns:convertor="clr-namespace:ParkInspect.Convertor"
        xmlns:userControls1="clr-namespace:ParkInspect.View.UserControls"
        mc:Ignorable="d ignore"
        Height="700"
        Width="1010"
        Title="ParkInspect"
        GlowBrush="{DynamicResource AccentColorBrush}"
        BorderThickness="1"
        DataContext="{Binding Dashboard, Source={StaticResource Locator}}"
        dialog:DialogParticipation.Register="{Binding Dialog, Source={StaticResource Locator}}"
        popup:PopupParticipation.Register="{Binding PopupManager, Source={StaticResource Locator}}">

    <Window.Resources>
        <ResourceDictionary>
            <convertor:VisibilityConverter x:Key="VisibilityConverter"/>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Skins/MainSkin.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <!--
    Waring, adding more tabs will require you to make them vissible in the dashboardViewModel.
    Add a new bool property in the dashboardViewModel and set it on true in the showAllTabs method.
    -->
    <Grid x:Name="LayoutRoot">
        <dragablz:TabablzControl>
            <dragablz:TabablzControl.InterTabController>
                <dragablz:InterTabController />
            </dragablz:TabablzControl.InterTabController>
        
            <TabItem Visibility="{Binding TabStatus[0], Converter={StaticResource VisibilityConverter}, Mode=TwoWay}"  Header="Klanten">
                <userControls1:CustomerControl />
            </TabItem>
            <TabItem Visibility="{Binding TabStatus[1], Converter={StaticResource VisibilityConverter}, Mode=TwoWay}"  Header="Parkeerplaatsen">
                <userControls1:ParkeerplaatsControl />
            </TabItem>
            <TabItem Visibility="{Binding TabStatus[2], Converter={StaticResource VisibilityConverter}, Mode=TwoWay}" Header="Opdrachten">
                <userControls1:AssignmentControl />
            </TabItem>
            <TabItem Visibility="{Binding TabStatus[4], Converter={StaticResource VisibilityConverter}, Mode=TwoWay}" Header="Vragenlijst">
                <userControls1:FormControl />
            </TabItem>
            <TabItem Visibility="{Binding TabStatus[5], Converter={StaticResource VisibilityConverter}, Mode=TwoWay}" Header="Personeel">
                <userControls1:EmployeeControl />
            </TabItem>
            <TabItem Visibility="{Binding TabStatus[6], Converter={StaticResource VisibilityConverter}, Mode=TwoWay}" Header="Rapportage">
                <userControls1:ReportControl />
            </TabItem>
            <TabItem Visibility="{Binding TabStatus[8], Converter={StaticResource VisibilityConverter}, Mode=TwoWay}" Header="Offline">
                <userControls1:OfflineControl />
            </TabItem>
            <TabItem Visibility="{Binding TabStatus[7], Converter={StaticResource VisibilityConverter}, Mode=TwoWay}" Header="Afwezigheid">
                <userControls1:AbsenceControl />
            </TabItem>
            <TabItem Header="Contactpersonen">
                <userControls1:ContactpersoonControl />

            </TabItem>
            <TabItem Header="Regio's">
                <userControls1:RegionControl/>
            </TabItem>
        </dragablz:TabablzControl>
    </Grid>

    <!--
    Warning: only works with registered roles.
    all registered roles can be found in the dashboardViewModel.
    -->

    <controls:MetroWindow.RightWindowCommands>
        <controls:WindowCommands ShowLastSeparator="False"
                                 DataContext="{Binding Login, Source={StaticResource Locator}}">
            <Label Content="{Binding LoginName}" />
            <Button Name="LoginButton" 
                       Command="{Binding ShowLoginDialogCommand}"
                    Content="Login"
                    IsEnabled="{Binding LoginButtonEnabled}" />
            <Button Command="{Binding LogoutCommand}"
                    Content="Logout"
                    IsEnabled="{Binding LogoutButtonEnabled}" />
            <Button DataContext="{Binding Dashboard}" Command="{Binding syncCommand}"
                    Content="Sync"/>

        </controls:WindowCommands>
    </controls:MetroWindow.RightWindowCommands>
</controls:MetroWindow>